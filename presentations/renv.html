<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Adrian Zetner">
  <meta name="dcterms.date" content="2023-07-04">
  <title>quarto-presentations - Reproducibility with renv</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Reproducibility with <code>renv</code></h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Adrian Zetner 
</div>
</div>
</div>

  <p class="date">2023-07-04</p>
</section>
<section id="sharing-r-analyses-with-collaborators" class="slide level2">
<h2>Sharing R Analyses with Collaborators</h2>
<ul>
<li class="fragment"><p>“I tried to run your code but it says I’m missing X” 😟</p></li>
<li class="fragment"><p>“Your code used to run fine but now it’s not working” 😖</p></li>
<li class="fragment"><p>“I upgraded my software and now your code is junk” 💔</p>
<aside class="notes">
<p>We’ve all been here. Headaches coming from code that we’ve written and are proud of but can’t be used by our colleagues or no longer works for them. The</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></li>
</ul>
</section>
<section id="reproducibility-in-data-driven-analysis" class="slide level2">
<h2>Reproducibility in Data Driven Analysis</h2>
<ul>
<li class="fragment"><p>Crucial for collaboration and transparency in science</p></li>
<li class="fragment"><p>Software and package versions can differ between computers</p></li>
<li class="fragment"><p>Potential code failure or inconsistent results</p></li>
<li class="fragment"><p>Solution: Replicate the environment</p></li>
</ul>
<aside class="notes">
<p>- Reproducibility in analysis is crucial for collaboration and transparency in science.</p>
<p>- Even with free and open-source software and clean code, software and package versions can differ between computers.</p>
<p>- Differences in software versions, package versions, and external dependencies can lead to code failure or inconsistent results.</p>
<p>- One solution is to replicate the environment in which the code was developed to ensure compatibility and result consistency.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="replicate-the-environment" class="slide level2">
<h2>Replicate the environment ♊</h2>
<ul>
<li class="fragment"><p>Manual replication of the environment is impractical</p></li>
<li class="fragment"><p>Potential solutions</p>
<ul>
<li class="fragment"><p>Virtual environments (Python, Conda, etc)</p></li>
<li class="fragment"><p>Docker</p></li>
<li class="fragment"><p>Binder/Jupyter Notebooks</p></li>
</ul></li>
</ul>
<aside class="notes">
<p>- Manual replication of the environment is impractical, prompting the need for automated solutions.</p>
<p>- Solutions range from ensuring consistent package versions to replicating the entire computer environment.</p>
<p>- Virtual environments to install elements from packages up to system libraries (python, conda, etc)</p>
<p>- Docker containers package applications into portable images to run consistently in almost any environment</p>
<p>- Binder and jupyter make sharing online from github etc easy</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="virtual-environments" class="slide level2">
<h2>Virtual Environments 🌌</h2>
<div class="fragment fade-in-then-semi-out">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://www.logicraysacademy.com/blog/wp-content/uploads/2020/04/python-programming.png" width="306"></p>
</figure>
</div>
</div>
<div class="fragment fade-in-then-semi-out">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://conda.io/en/latest/_static/conda_logo_full.svg" width="323"></p>
</figure>
</div>
</div>
<aside class="notes">
<ul>
<li>Python virtual environments are folders containing a complete copy of the Python stack used to create them.</li>
<li>They consist of a separate python executable, the associated stack, and a site-packages folder for installed Python packages.</li>
<li>Virtual environments ensure full isolation by handling package installations independently.</li>
<li>They are easy to understand and use but can be heavyweight due to the duplication of the Python stack and packages for each environment.</li>
<li>Conda is a language-agnostic tool for package management and environment management. As a package manager, Conda can install, update and remove packages. As an environment manager, it can manage virtual environments. It’s robust and broadly applicable but not useable in all contexts</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="containers" class="slide level2">
<h2>Containers 🎁</h2>
<div class="fragment fade-in-then-semi-out">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Docker_%28container_engine%29_logo.svg" width="323"></p>
</figure>
</div>
</div>
<aside class="notes">
<ul>
<li><p>Docker containers are lightweight relative to true virtual machines and create isolated environments that package applications and their dependencies into a standardized unit</p></li>
<li><p>Developing docker containers comes with increased overhead both from complexity in development and deployment along with potential security concerns and performance limitations</p></li>
<li><p>Not exactly what we want to have to focus on when sharing data analysis with colleagues</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="notebooks" class="slide level2">
<h2>Notebooks 📑</h2>
<div class="fragment fade-in-then-semi-out">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://davidfastovich.com/post/r_jupyter/featured_hu56ca4828c15a5b64b87022f5c351d8ec_15830_720x2500_fit_q75_h2_lanczos_3.webp" width="323"></p>
</figure>
</div>
</div>
<div class="fragment fade-in-then-semi-out">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://allthedifferences.com/wp-content/uploads/2023/03/image-11.png.webp" width="323"></p>
</figure>
</div>
</div>
<aside class="notes">
<p>Note book options</p>
<p><a href="https://mybinder.org/">Binder</a> is a&nbsp;<strong>free</strong>&nbsp;service that creates a virtual computer in the cloud based on the specifications listed in a GitHub repository. In the process of building the environment, Binder also clones the GitHub repository making it painless to reproduce analyses. It is essentially read-only though and while great for sharing analyses it can be slow to load and easy to lose work</p>
<p>Jupyter notebooks integrate code and its output into a single document that combines visualizations, narrative text, mathematical equations, and other rich media. In other words: it’s a single document where you can run code, display the output, and also add explanations, formulas, charts, and make your work more transparent, understandable, repeatable, and shareable. Great for sharing analyses, somewhat limited by software needed to run</p>
<p>These all seem like a lot of work simply to share our projects with other people, enter…</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>

<img data-src="https://rstudio.github.io/renv/logo.svg" width="500" class="r-stretch quarto-figure-center"><aside class="notes">
<ul>
<li>RStudio, specifically Kevin Ushey, has developed a user-friendly solution called renv to address reproducibility in R projects</li>
<li>You use `renv` to store information about dependencies with your code</li>
<li>Other people use `renv` to install the exact same versions of the dependencies before running your code</li>
<li>A couple glossary terms before getting into it…</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="r-projects" class="slide level2">
<h2>R Projects 📂</h2>

<img data-src="https://intro2r.com/images/directory_structure.png" width="287" class="r-stretch"><aside class="notes">
<ul>
<li><p>Projects are the organizational tool of RStudio, essentially a folder</p></li>
<li><p>Organize all aspects of an analysis (raw data, R scripts, external scripts, outputs, documentation, etc) within a root directory</p></li>
<li><p>Allows for relative pathing amongst all elements</p></li>
<li><p>Allows for simultaneous analyses in different folders and siloing those from each other</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="packages" class="slide level2">
<h2>Packages 📦</h2>
<ul>
<li class="fragment"><p>Extend base R with more functionality</p></li>
<li class="fragment"><p>Called libraries or packages in other languages</p></li>
<li class="fragment"><p>Can require compilation on your machine (source) or pre-compiled as a binary package</p></li>
</ul>
<aside class="notes">
<p>Extend base R with more functionality Called libraries or packages in other languages Can require compilation on your machine (source) or pre-compiled as a binary package</p>
<p>Binary packages offer several advantages such as Faster installation, Platform compatibility, Dependency resolution, and greater Security when installed from trusted sites. When binary packages are unavailable (OS differences etc) they must be compiled locally.</p>
<p>Installed from…</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="repositories" class="slide level2">
<h2>Repositories 🏛️</h2>
<ul>
<li class="fragment"><p>Source of packages 📦</p></li>
<li class="fragment"><p>Many different available</p>
<ul>
<li class="fragment"><p>CRAN</p></li>
<li class="fragment"><p>Bioconductor</p></li>
<li class="fragment"><p>Posit Public Package Manager</p></li>
<li class="fragment"><p>R Universe</p></li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li><p>A repository is a source of packages.</p></li>
<li><p>The main repository for R packages is CRAN (Comprehensive R Archive Network), which is accessible in almost every R session.</p></li>
<li><p>Other freely available repositories include Bioconductor, Posit (formerly RStudio) Public Package Manager, and R Universe.</p></li>
<li><p>When a package is retrieved from a repository it is installed on your computer to a library</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="libraries" class="slide level2">
<h2>Libraries 📚</h2>
<ul>
<li class="fragment"><p>Store packages installed for current R version</p></li>
<li class="fragment"><p>System libraries</p>
<ul>
<li class="fragment"><p>User</p></li>
<li class="fragment"><p>Site</p></li>
<li class="fragment"><p>Default</p></li>
</ul></li>
</ul>
<aside class="notes">
<p>A library in R is a directory that contains installed packages.</p>
<p>Three system libraries: a user library, a site library, and a default library where base R packages are installed.</p>
<p>Generally, you don’t have to worry about libraries and can install all packages into a system library shared across projects.</p>
<p>Sometimes changes to packages can break functionality in older projects.</p>
<p>With the use of renv, you can employ project libraries, which provide each project with its own separate set of packages.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="project-local-libraries-with-renv" class="slide level2">
<h2>Project Local Libraries with <code>renv</code> 📚</h2>
<ul>
<li class="fragment">Project local dependency management</li>
<li class="fragment">Store and restore your project dependencies</li>
<li class="fragment">Mimic Packrat</li>
<li class="fragment">Little to no change to workflows</li>
</ul>
<aside class="notes">
<ul>
<li>Project local dependency management</li>
<li>Store and restore your project dependencies</li>
<li>Mimic Packrat</li>
<li>Little to no change to workflows</li>
</ul>
<p>OK, so we have the concepts of projects, packages, libraries, and repositories down now, correct? So the natural extension of that is to individualize dependencies to a single project in order to save and load the state of your project as you wrote it. renv is designed to more robustly mimic much of the functionality of the now defunct packrat package with fewer surprises and better default behaviours. The philosophy behind renv is that your project workflow shouldn’t meaningfully change due to incorporating it into your projects.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="workflow" class="slide level2">
<h2>Workflow 🔀</h2>
<ol type="1">
<li class="fragment">Initialize a new project local environment with a private R library with <code>renv::init()</code></li>
<li class="fragment">Work in the project as normal adding packages with <code>install.packages()</code></li>
<li class="fragment">Save the state of the working project with <code>renv::snapshot()</code> to lock file (<code>renv.lock</code>)</li>
<li class="fragment">Keep working with the option to save state after successful changes (<code>renv::snapshot()</code>) or revert to previous if updates introduce new problems (<code>renv::restore()</code>)</li>
</ol>
<aside class="notes">
<p>The general workflow when working with&nbsp;<code>renv</code>&nbsp;is: 1. Call&nbsp;<code>[renv::init()](../reference/init.html)</code>&nbsp;to initialize a new project-local environment with a private R library<br>
2. Work in the project as normal, installing and removing new R packages as they are needed in the project<br>
3. Call&nbsp;<code>[renv::snapshot()](../reference/snapshot.html)</code>&nbsp;to save the state of the project library to the lockfile (called&nbsp;<code>renv.lock</code>)<br>
4. Keep working with the option to save state after successful changes (<code>renv::snapshot()</code>) or revert to previous if updates introduce new problems (<code>renv::restore()</code>)</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="initialize" class="slide level2">
<h2>Initialize ✨</h2>
<ol type="1">
<li class="fragment">Searches R scripts for implicitly included dependencies using <code>dependencies()</code>
<ul>
<li class="fragment"><code>library("dplyr")</code></li>
<li class="fragment"><code>dplyr::mutate()</code></li>
</ul></li>
<li class="fragment">Copy discovered packages into the&nbsp;<code>renv</code>&nbsp;global package cache for re-use</li>
<li class="fragment">Missing&nbsp;R&nbsp;package dependencies are installed into the project’s private library</li>
<li class="fragment">Initial lockfile capturing the state of the project’s library is created</li>
<li class="fragment">The project is activated with&nbsp;<code>activate()</code></li>
</ol>
<aside class="notes">
<p>What does renv actually do when you call init? The primary steps taken when initializing a new project are:<br>
1. R&nbsp;package dependencies are discovered within the&nbsp;R&nbsp;files used within the project with&nbsp;<code>[dependencies()](dependencies.html)</code><br>
2. Discovered packages are copied into the&nbsp;<code>renv</code>&nbsp;global package cache, so these packages can be re-used across future projects as necessary<br>
3. Any missing&nbsp;R&nbsp;package dependencies discovered are then installed into the project’s private library<br>
4. A lockfile capturing the state of the project’s library is created with&nbsp;<code>[snapshot()](snapshot.html)</code><br>
5. The project is activated with&nbsp;<code>[activate()](activate.html)</code> which adds the necessary code to the project’s .Rprofile to use the project’s own library on start up</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="initialize---infrastructure-files" class="slide level2 smaller">
<h2>Initialize - Infrastructure &amp; Files ✨</h2>
<table>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th><strong>File</strong></th>
<th><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><code>.Rprofile</code></strong></td>
<td>Updated to activate&nbsp;<code>renv</code>&nbsp;for new project R sessions</td>
</tr>
<tr class="even">
<td><strong><code>renv.lock</code></strong></td>
<td>The lockfile</td>
</tr>
<tr class="odd">
<td><code>renv/</code></td>
<td>Folder containing all environment details</td>
</tr>
<tr class="even">
<td><strong><code>renv/activate.R</code></strong></td>
<td>Activation script run by the project&nbsp;<code>.Rprofile</code>.</td>
</tr>
<tr class="odd">
<td><code>renv/library</code></td>
<td>The private project library</td>
</tr>
<tr class="even">
<td><code>renv/settings.json</code></td>
<td>Project settings</td>
</tr>
<tr class="odd">
<td><code>renv/.gitignore</code></td>
<td>renv specific gitignore</td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>Project Rprofile with appended activation scripts</li>
<li>Lockfile describing the state of your project’s library at some point in time.</li>
<li>Project subfolder that holds all the the important environment details like: Activation script, project library, settings, and .gitignore</li>
<li><code>.Rprofile</code>,&nbsp;<code>renv.lock</code>&nbsp;and&nbsp;<code>renv/activate.R</code>&nbsp;files should be committed to your version control system which is usually done by <code>renv::init()</code>. Changes to settings.json should also be tracked.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="renv.lock" class="slide level2 smaller">
<h2><code>renv.lock</code> 🔒</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">Version of <code>renv</code><br>
</li>
<li class="fragment">Version of R</li>
<li class="fragment">R repositories active for lockfile<br>
</li>
<li class="fragment">Package records</li>
</ul>
</div><div class="column" style="width:50%;">
<pre><code>{
  "R": {
    "Version": "4.2.3",
    "Repositories": [
      {
        "Name": "CRAN",
        "URL": "https://cloud.r-project.org"
      }
    ]
  },
  "Packages": {
    "markdown": {
      "Package": "markdown",
      "Version": "1.0",
      "Source": "Repository",
      "Repository": "CRAN",
      "Hash": "4584a57f565dd7987d59dda3a02cfb41"
    },
    "here": {
      "Package": "here",
      "Version": "0.7",
      "Source": "Repository",
      "Repository": "CRAN",
      "Hash": "908d95ccbfd1dd274073ef07a7c93934"
    }
  }
}</code></pre>
</div>
</div>
<aside class="notes">
<p><code>renv</code>&nbsp;uses a&nbsp;<strong>lockfile</strong>&nbsp;to capture the state of your library at some point in time. It is stored as a collection of&nbsp;<em>records</em>, with different records defining:</p>
<ul>
<li>The version of&nbsp;<code>renv</code>&nbsp;used when generating the lockfile;</li>
<li>The version of&nbsp;<code>R</code>&nbsp;used in that project;</li>
<li>The R repositories that were active when the lockfile was created;</li>
<li><em>Package records</em>&nbsp;defining each R package, their version, and their installation source.</li>
</ul>
<p>Here is an example lockfile, including the packages&nbsp;<code>markdown</code>&nbsp;and&nbsp;<code>here</code></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="cache" class="slide level2">
<h2>Cache 🏦</h2>
<ul>
<li class="fragment">Global package installation location shared across all projects</li>
<li class="fragment">Project specific libraries built from symlinks to cache</li>
<li class="fragment">Primary benefits:
<ul>
<li class="fragment">Speed up <code>renv::restore()</code> and <code>renv::install()</code></li>
<li class="fragment">Save disk space</li>
</ul></li>
</ul>
<aside class="notes">
<p>One of&nbsp;<code>renv</code>’s primary features is the use of a global package cache, which is shared across all projects using&nbsp;<code>renv</code>. This means that project specific libraries are actually built from symlinks to the user’s cache</p>
<p>The&nbsp;<code>renv</code>&nbsp;package cache provides two primary benefits:</p>
<ol type="1">
<li>Future calls to&nbsp;<code>[renv::restore()](../reference/restore.html)</code>&nbsp;and&nbsp;<code>[renv::install()](../reference/install.html)</code>&nbsp;will become much faster, as&nbsp;<code>renv</code>&nbsp;will be able to find and re-use packages already installed in the cache.<br>
</li>
<li>Because it is not necessary to have duplicate versions of your packages installed in each project, the&nbsp;<code>renv</code>&nbsp;cache should also help you save disk space relative to an approach with project-specific libraries without a global cache.</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="cache-1" class="slide level2">
<h2>Cache 🏦</h2>
<ul>
<li class="fragment">Install process
<ul>
<li class="fragment">Installation requested</li>
<li class="fragment">Available? Link, otherwise install.</li>
<li class="fragment">Copy to cache</li>
<li class="fragment">Link back to project</li>
</ul></li>
<li class="fragment">Location
<ul>
<li class="fragment">Default to <code>~/.local/share/renv</code></li>
<li class="fragment">Multiple locations allowed</li>
</ul></li>
</ul>
<aside class="notes">
<p>The process by which packages enter the cache is roughly as follows:</p>
<ol type="1">
<li>Package installation is requested via e.g.&nbsp;<code>[install.packages()](https://rdrr.io/r/utils/install.packages.html)</code>, or&nbsp;<code>[renv::install()](../reference/install.html)</code>, or as part of&nbsp;<code>[renv::restore()](../reference/restore.html)</code>.</li>
<li>If&nbsp;<code>renv</code>&nbsp;is able to find the requested version of the package in the cache, then that package is linked into the project library, and installation is complete.<br>
</li>
<li>Otherwise, the package is downloaded and installed into the project library.<br>
</li>
<li>After installation of the package has successfully completed, the package is then copied into the global package cache, and then linked back into the project library.</li>
</ol>
<p>Renv defaults to the user’s home .local folder but multiple locations cache locations can be indicated and shared between users. If using a shared cache the time and disk savings can be leveraged across many users</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="shims" class="slide level2">
<h2>Shims 🔼</h2>
<table>
<thead>
<tr class="header">
<th><strong>Function</strong></th>
<th><strong>Shim</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>install.packages()</code></td>
<td><code>renv::install()</code></td>
</tr>
<tr class="even">
<td><code>remove.packages()</code></td>
<td><code>renv::remove()</code></td>
</tr>
<tr class="odd">
<td><code>update.packages()</code></td>
<td><code>renv::update()</code></td>
</tr>
</tbody>
</table>
<aside class="notes">
<p>To help you take advantage of the package cache,&nbsp;<code>renv</code>&nbsp;places a couple of shims (or aliases) on the search path - Package related functions like install/remove/update from the utils package become renv functions In effect, calling&nbsp;<code>[install.packages()](https://rdrr.io/r/utils/install.packages.html)</code>&nbsp;within an&nbsp;<code>renv</code>&nbsp;project will call&nbsp;<code>[renv::install()](../reference/install.html)</code>&nbsp;instead. This can be useful when installing packages which have already been cached. For example, if you use&nbsp;<code>renv::install("dplyr")</code>, and&nbsp;<code>renv</code>&nbsp;detects that the latest version on CRAN has already been cached, then&nbsp;<code>renv</code>&nbsp;will just install using the copy available in the cache – thereby skipping some of the installation overhead. This can be disabled but is a really lovely convenience feature.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="isolation" class="slide level2">
<h2>Isolation 🫧</h2>
<ul>
<li class="fragment">Require that all packages be distributed with a project</li>
<li class="fragment"><code>renv::isolate()</code>: copies all dependencies into the local library</li>
<li class="fragment">Vastly increases project folder size</li>
<li class="fragment">No reliance on external libraries</li>
</ul>
<aside class="notes">
<ul>
<li>Sometimes one requires that a project can be distributed in a more contained fashion with all packages included in a zip file.</li>
<li>Renv’s isolate function copies all dependencies in the project library from the cache into the project folder: project can be zipped and shared at the cost of a large increase of folder size</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="collaboration---setup" class="slide level2">
<h2>Collaboration - Setup ⚒️</h2>
<ul>
<li class="fragment">Create a new project repository and folder</li>
<li class="fragment">One user explicitly initializes <code>renv</code> in the version controlled project folder</li>
<li class="fragment">Commit all files including <code>renv</code> generated ones</li>
<li class="fragment"><code>renv</code> will now bootstrap the project environment on collaborators computers</li>
</ul>
<aside class="notes">
<ol type="1">
<li>One user (perhaps yourself) should explicitly initialize&nbsp;<code>renv</code>&nbsp;in the project, via&nbsp;<code>[renv::init()](../reference/init.html)</code>. This will create the initial&nbsp;<code>renv</code>&nbsp;lockfile, and also write the&nbsp;<code>renv</code>&nbsp;auto-loaders to the project’s&nbsp;<code>.Rprofile</code>&nbsp;and&nbsp;<code>renv/activate.R</code>. These will ensure the right version of&nbsp;<code>renv</code>&nbsp;is downloaded and installed for your collaborators when they start in this project.</li>
<li>Share your project sources, alongside the generated lockfile&nbsp;<code>renv.lock</code>. Be sure to also share the generated auto-loaders in&nbsp;<code>.Rprofile</code>&nbsp;and&nbsp;<code>renv/activate.R</code>.</li>
<li>When a collaborator first launches in this project,&nbsp;<code>renv</code>&nbsp;should automatically bootstrap itself, thereby downloading and installing the appropriate version of&nbsp;<code>renv</code>&nbsp;into the project library. After this has completed, they can then use&nbsp;<code>[renv::restore()](../reference/restore.html)</code>&nbsp;to restore the project library locally on their machine.</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="collaboration---workflow" class="slide level2">
<h2>Collaboration - Workflow 🔀</h2>
<ul>
<li class="fragment">Ensure all collaborators using the same package version
<ul>
<li class="fragment">Install and test locally</li>
<li class="fragment">Snapshot project</li>
<li class="fragment">Share lockfile</li>
<li class="fragment">Restore locally</li>
</ul></li>
<li class="fragment">Lockfile changes can be viewed with <code>renv::history()</code></li>
</ul>
<aside class="notes">
<p>While working on a project, you or your collaborators may need to update or install new packages in your project. When this occurs, you’ll also want to ensure your collaborators are then using the same newly-installed packages. In general, the process looks like this: 1. A user installs, or updates, one or more packages in their local project library; 2. That user calls&nbsp;<code>[renv::snapshot()](../reference/snapshot.html)</code>&nbsp;to update the&nbsp;<code>renv.lock</code>&nbsp;lockfile;<br>
3. That user then shares the updated version of&nbsp;<code>renv.lock</code>&nbsp;with their collaborators;<br>
4. Other collaborators then call&nbsp;<code>[renv::restore()](../reference/restore.html)</code>&nbsp;to install the packages specified in the newly-updated lockfile.</p>
<p>A bit of care is required if collaborators wish to update the shared&nbsp;<code>renv.lock</code>&nbsp;lockfile concurrently – in particular, if multiple collaborators are installing new packages and updating their own local copy of the lockfile, then conflicts would need to be sorted out afterwards.</p>
<p><em>One way to guard against this it to use a version control system, and have all collaborators work off the same branch. This way, if someone needs to update&nbsp;<code>renv.lock</code>&nbsp;in the public repository, all collaborators will see that updated lockfile and will gain access to it next time they pull those changes. Depending on the size of your team, you may want to ensure any changes to&nbsp;<code>renv.lock</code>&nbsp;are communicated so that everyone knows and understands when and why packages have been installed or updated.</em></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="caveats" class="slide level2">
<h2>Caveats ☠️</h2>
<ul>
<li class="fragment">Not a panacea for reproducibility</li>
<li class="fragment">Solves one part of the problem
<ul>
<li class="fragment">Records R and package versions</li>
<li class="fragment">Tools to reinstall above</li>
</ul></li>
<li class="fragment">Problems
<ul>
<li class="fragment">Results may depend on other system components</li>
<li class="fragment">Packages may be removed from repositories</li>
</ul></li>
</ul>
<aside class="notes">
<p>It is important to emphasize that&nbsp;<strong>renv is not a panacea for reproducibility</strong>. Rather, it is a tool that can help make projects reproducible by solving one small part of the problem: it records the version of R + R packages being used in a project, and provides tools for reinstalling the declared versions of those packages in a project. Ultimately, making a project reproducible requires some thoughtfulness from the user: what does it mean for a particular project to be reproducible, and how can&nbsp;<code>renv</code>&nbsp;(and other tools) be used to accomplish that particular goal of reproducibility?</p>
<p>There are a still a number of factors that can affect whether this project could truly be reproducible in the future – for example,</p>
<ol type="1">
<li><p>The results produced by a particular project might depend on other components of the system it’s being run on – for example, the operating system itself, the versions of system libraries in use, the compiler(s) used to compile R and the R packages used, and so on. Keeping a ‘stable’ machine image is a separate challenge, but&nbsp;<a href="https://www.docker.com/">Docker</a>&nbsp;is one popular solution. See also&nbsp;<code>[vignette("docker", package = "renv")](../articles/docker.html)</code>&nbsp;for recommendations on how Docker can be used together with&nbsp;<code>renv</code>.</p></li>
<li><p>The R packages that the project depends on may no longer be available. If your project depends on R packages available on CRAN, it’s possible those packages may be removed in the future – either by request of the package maintainer, or by the maintainers of CRAN itself. This is quite rare, but needs consideration if reproducibility of a project is paramount.</p></li>
</ol>
<p><em>In addition, be aware that package installation may fail if a package was originally installed through a CRAN-available binary, but that binary is no longer available.&nbsp;<code>renv</code>&nbsp;will attempt to install the package from sources in this situation, but attempts to install from source can (and often do) fail due to missing system prerequisites for compilation of a package. The&nbsp;<code>[renv::equip()](../reference/equip.html)</code>&nbsp;function may be useful in these scenarios, especially on Windows: it will download external software commonly used when compiling R packages from sources, and instruct R to use that software during compilation.</em></p>
<p>A salient example of this is the&nbsp;<code>rmarkdown</code>&nbsp;package, as it relies heavily on the&nbsp;<a href="https://pandoc.org/"><code>pandoc</code></a>&nbsp;command line utility. However, because pandoc is not bundled with the&nbsp;<code>rmarkdown</code>&nbsp;package (it is normally provided by RStudio, or installed separately by the user), simply restoring an&nbsp;<code>renv</code>&nbsp;project using&nbsp;<code>rmarkdown</code>&nbsp;may not be sufficient – one also needs to ensure the project is run in a environment with the correct version of&nbsp;<code>pandoc</code>&nbsp;available.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="use-case---shiny" class="slide level2 smaller">
<h2>Use Case - Shiny🌟</h2>
<ul>
<li class="fragment">Shiny apps utilize site library</li>
<li class="fragment">Changes to one app’s dependencies can break others
<ul>
<li class="fragment">Eg. <code>dplyr</code> update from version 1.0.10 to 1.1.12 replaced <code>summarise()</code> with <code>reframe()</code></li>
<li class="fragment">Installing new dplyr to system library breaks older apps</li>
</ul></li>
<li class="fragment">Solution:
<ul>
<li class="fragment">Initialize <code>renv</code> project in shiny app dir (shared shiny user cache)</li>
<li class="fragment">Restore lockfile to symlink and install all dependencies to app local library</li>
<li class="fragment">Include sourcing of <code>renv/activate.R</code> in <code>app.R</code></li>
</ul></li>
<li class="fragment">Now Shiny apps can rely on some shared packages and some unique packages</li>
<li class="fragment">Easier addition of more shiny apps without clobbering existing</li>
</ul>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="when-to-use-renv" class="slide level2">
<h2>When to Use <code>renv</code></h2>
<ul>
<li class="fragment"><p>Collaborating on project and sharing results</p></li>
<li class="fragment"><p>Ensure forward compatibility</p></li>
<li class="fragment"><p>Project small enough to not warrant using more intense encapsulation</p></li>
<li class="fragment"><p>Use of more robust encapsulation problematic (eg. Docker on Shiny Server)</p></li>
</ul>
</section>
<section id="questions" class="slide level2">
<h2>Questions?</h2>
</section>
<section id="use-case---operational-reports" class="slide level2">
<h2>Use Case - Operational Reports</h2>
<ul>
<li class="fragment">Updating <code>dplyr</code> caused a change in the functionality of <code>if_else()</code> where <code>Surveiller</code> relied on the</li>
</ul>
<aside class="notes">
<p>Hot off the presses.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>


<img src="https://rstudio.github.io/renv/logo.svg" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>